name: "Override Test"
description: "Fixture for testing nested context overrides parent env"

env:
  VAR: "parent"

scenarios:
  - id: uses_parent
    name: "Uses parent env"
    run:
      command: echo "VAR=${VAR}"
      timeout: 5s
    assertions:
      - command: assert_contains "VAR=parent" ${RUN_OUTPUT}/stdout

  - id: child_group
    name: "Child overrides VAR"
    env:
      VAR: "child"
    scenarios:
      - id: uses_child
        name: "Uses child env"
        run:
          command: echo "VAR=${VAR}"
          timeout: 5s
        assertions:
          - command: assert_contains "VAR=child" ${RUN_OUTPUT}/stdout
